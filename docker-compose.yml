version: "3.8"

networks:
  frontend:
  backend:

services:
  supervisor:
    container_name: supervisor
    build:
      context: ./Lais-Supervisor/
    restart: always
    ports:
    - 80:3000
    depends_on:
      - server
    networks:
      - frontend
  
  nginx:
    container_name: nginx
    build:
      context: ./Lais-Nginx/
    restart: always
    ports:
      - 8181:3000
    depends_on:
      - server
    networks:
      - frontend

  server:
    container_name: server
    build:
      context: ./Lais-Server/
    restart: always
    ports:
      - 8080:3000
    depends_on:
      - db
    networks:
       - frontend
       - backend

  db:
    container_name: db
    image: mongo:4.4
    restart: always
    ports:
      - 27017:27017
    volumes:
      - /data/db:/data/db
    networks:
      - backend
